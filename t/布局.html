<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title></title>
		<script src="js/jquery-1.11.0.js" type="text/javascript" charset="utf-8"></script>
		<script src="js/twaver.js" type="text/javascript" charset="utf-8"></script>
		<script type="text/javascript">
			$(document).ready(function () {
				init();
			})
		</script>
	</head>
	<body>
	</body>
	<script type="text/javascript">
		var box = new twaver.ElementBox();
    var network = new twaver.network.Network(box);
    var toolbar = document.createElement('div');
    var autoLayouter = new twaver.layout.AutoLayouter(box);
    var bounds = null;

    function init() {
        initToolbar();
        initNetwork();
        initBox();
    }

    function initNetwork(){
        var pane = new twaver.controls.BorderPane(network, toolbar);
        pane.setTopHeight(25);
        var view = pane.getView();
        view.style.left = '0px';
        view.style.top = '0px';
        view.style.right = '0px';
        view.style.bottom = '0px';
        document.body.appendChild(view);
        window.onresize = function () {
//          split.invalidate();
        };
    }
    function initToolbar() {
        var zoomToOverview = addCheckBox(toolbar, false, "Overview", function () {
            doLayout(zoomToOverview.value,autoLayouterType.value);
        });

        var autoLayouterType = document.createElement('select');
        var items = ['round', 'symmetry', 'topbottom', 'bottomtop', 'leftright', 'rightleft', 'hierarchic'];
        items.forEach(function (item) {
            var option = document.createElement('option');
            option.appendChild(document.createTextNode(item));
            option.setAttribute('value', item);
            autoLayouterType.appendChild(option);
        });
        autoLayouterType.addEventListener('change', function () {
        	doLayout(zoomToOverview.value,autoLayouterType.value); 
        }, false);
        toolbar.appendChild(autoLayouterType);
    }

    function doLayout (overview,type) {
        if (overview) {
	        autoLayouter.doLayout(type, function () {
	            network.zoomOverview(false);
	        });
	    } else {
	        autoLayouter.doLayout(type);
	    }
	}

function addCheckBox (div, checked, name, callback) {
    var checkBox = document.createElement('input');
    checkBox.id = name;
    checkBox.type = 'checkbox';
    checkBox.style.padding = '4px 4px 4px 4px';
    checkBox.checked = checked;
    if (callback) checkBox.addEventListener('click', callback, false);
    div.appendChild(checkBox);
    var label = document.createElement('label');
    label.htmlFor = name;
    label.innerHTML = name;
    div.appendChild(label);
    return checkBox;
}

function initBox() {
    for (var i = 0, n = 1; i < n; i++) {
        var group = new twaver.Node({name: '' + box.size()});
        box.add(group);
        for (var j = 0, c = 25; j < c; j++) { 
        	var node = new twaver.Node({name: '' + box.size()}); 
        	group.addChild(node); 
        	box.add(node); 
        	var link = new twaver.Link({name: '' + box.size()}, group, node); 
        	group.addChild(link); box.add(link); 
        }
    }
        	autoLayouter.doLayout('hierarchic'); 
}
	</script>
</html>
